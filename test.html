<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src='eth_api.js'></script>
<input type='text' name='' id='level' class='form-control' value='1'>
<input type='button' name='' onclick='start_game($("#level").val())' class='form-control' value='start'>


<script>
//0x96eE4CC8FEB236D6fbdbf8821f4D2873564B9D8f - eth address игрока
function start_game(level=1) {
	
if (level < 1) return false;
if (level > 10) return false;

/*
https://api.etherscan.io/api?module=proxy&action=eth_getTransactionCount&address=0x2910543af39aba0cd09dbb2d50200b3e800a63d2&tag=latest&apikey=YourApiKeyToken
*/
$.post("https://rpc.myetherwallet.com/api.mew",{txdata:'96eE4CC8FEB236D6fbdbf8821f4D2873564B9D8f'},function(d){
	console.log("получили nonce");
	var options = {};
	options.nonce = d.data.nonce;
	console.log(d.data.nonce);
	
	options.data = '0xcddbe729000000000000000000000000000000000000000000000000000000000000000'+level; //собственно это надо отправить, чтоб вызвалась функция game();
	options.to = "0x1fa8b177dc1a9aa12f52cc15db4a514e12194e21"; //адрес нашего смарт контракта
	options.gasPrice="0x4e3b29200";//web3.toHex('21000000000');
	options.gasLimit=0x927c0; //web3.toHex('600000');
	options.value = 20000000000000000; //  //ставка 0.02 эфира

	var tx = new EthereumTx(options);

	tx.sign(new buf('d283c2b462fa6444db77d622d8b05674f0bd71b9876c67d3aecafe01805620b1', 'hex')); //приватный ключ игрока, подписываем транзакцию

	var serializedTx = tx.serialize().toString('hex');
	/*
	console.log("Транзакция подписана: "+serializedTx);
	$.getJSON("https://api.etherscan.io/api?module=proxy&action=eth_sendRawTransaction&hex="+serializedTx+"&apikey=YourApiKeyToken",function(d){
		
		console.log("Транзакция отправлена в сеть");
		console.log(d.result); //здесь будет ethereum txid по которому мы позже сможем вытащить результат.
	});
	*/		
}, "json");

}


</script>