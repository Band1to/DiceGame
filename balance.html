<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->

<head>
	<meta charset="utf-8" />

	<title>DAO.CASINO</title>
	<meta content="" name="description" />

	<link rel="shortcut icon" href="img/favicon/favicon.ico" type="image/x-icon" />
	<link rel="apple-touch-icon" href="img/favicon/apple-touch-icon.png" />
	<link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-touch-icon-114x114.png" />

	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/main.min.css" />
	<link rel="stylesheet" href="css/fonts.css" />
	<link rel="stylesheet" href="css/media.min.css" />
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css" />
	<link rel="stylesheet" href="libs/magnific-popup/magnific-popup.css" />

</head>
<body>
	<!-- WRAPPER -->
	<div class="wrapper_main">

		<div class="mobile-menu-overlay"></div>

		<div class="mobile-menu mCustomScrollbar" data-mcs-theme="minimal-dark">
			<a class="closed-mnu">x</a>
			<div class="registration">
				<form action="">
					<div class="clearfix">
						<input type="text" placeholder="USERNAME">
						<input type="text" class="mobile-input" placeholder="PASSWORD">
					</div>
					<div class="button-block clearfix">
						<button class="log-in-mobile">login</button>
						<button class="registr-now">join now</button>
					</div>
				</form>
			</div>

			<nav class="main-top-menu">
				<ul class="clearfix">
					<li><a href="#">ROULETTE</a></li>
					<li><a href="#">DICE</a></li>
					<li><a href="#">BLACKJACK</a></li>
					<li><a href="#">ROULETTE</a></li>
					<li><a href="#">POKER GAMES</a></li>
					<li><a href="#">PROMOTIONS</a></li>
					<li><a href="#">EXCHANGE</a></li>
				</ul>
			</nav>

			<div class="search-games">
				<form action="">
					<input type="text" placeholder="search  games">
					<button class="search-games__button"></button>
				</form>
			</div>

			<nav class="footer-menu">
				<h3>Footer menu</h3>
				<ul>
					<li><a href="#">About Us</a></li>
					<li><a href="#">Provably Fair</a></li>
					<li><a href="#">Terms and Conditions</a></li>
					<li><a href="#">Responsible</a></li>
					<li><a href="#">Gambling Rules</a></li>
					<li><a href="#">Complaints</a></li>
					<li><a href="#">Contact Us</a></li>
				</ul>
			</nav>

		</div>
		<!-- HEADER -->
		<header>
			<div class="wrapper-block__logo">
				<div class="wrapper-lofo clearfix">
					<div class="row">
						<div class="col-md-4 col-sm-6 col-xs-6 top-logo">
							<div class="logo">
								<a href="/">
									<img src="img/logo.png" alt="Logo images">
								</a>
							</div>
						</div>
						<div class="col-md-3 col-sm-6 col-xs-6 top-check">
							<div class="switch-block clearfix">
								<form action="">
									<span class="real-money switch-span">TESTNET</span>
									<span class="toggle-bg">
										<input type="radio" id="checked-off" name="toggle" value="off">
										<input type="radio" id="checked-on" name="toggle" value="on"> 
										<span class="switch"></span>
									</span>
									<span class="free-money switch-span">MAINNET</span>
								</form>
							</div>
						</div>
						<div class="col-md-5 col-sm-6 col-xs-6 top-sign-in">
							<div class="registration">
								<a style='visibility:hidden' class="popup-with-move-anim disclaimer-btn registr-now" id='regbut' href="#small-dialog">
									Sign in
								</a>
								
								<div id='isreg' style='display:none'>
									<a class="disclaimer-btn" id='balance' href="/balance.html">
										? ETH
									</a>
									<a onclick='localStorage.clear();window.location.reload()' class="disclaimer-btn" href="#">
										exit
									</a>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</div>

		</header>
		<!-- HEADER AND -->
		<!-- MAIN -->
		<main clsaa="main">
			<div class="wrapper-content">
				<div style='color:white;text-align:center;padding-top:5%;' class="container">
					
					<div id="recharge" >
						<h3>
							Your dao.casino account:
						</h3>
						<h1 id='myado'>0x...</h1>
					
						<h3>
							to deposit send your ether to this adress 
						</h3>
					</div>
					
					<div style='margin-top:50px' id="withdraw" >
						<p>
							To withdraw your ether insetr your ethereum address below and click SEND
						</p>
						<input type='text' name='' id='outetht' class='form-control' style='color:black' placeholder='0x...' value=''>
						<button onclick='sendEther($("#outetht").val())' class="disclaimer-btn registr-now">withdraw all</button>
						<div id='result1'></div>
					</div>
					<script>
					
					
					function sendEther(to) {
					
					var u='testnet.etherscan.io';
					if (localStorage.getItem("mainnet") == "on") u='api.etherscan.io';
		
					$.get("https://"+u+"/api?module=proxy&action=eth_getTransactionCount&address="+localStorage.getItem("openkey")+"&tag=latest&apikey=YourApiKeyToken",function(d){
						
						var options = {};
						options.nonce = d.result; 
						//options.data = '0xa9059cbb000000000000000000000000'+to.replace('0x','')+''+pad(amount.toString(16),64);
						console.log(options.data);
						options.to = to; 
						options.gasPrice="0x737be7600";
						options.gasLimit=0x927c0; 
						options.value = totalwei-20000000000000000;  //отнимем на комиссию
						

							
								var tx = new EthJS.Tx(options);
								tx.sign(EthJS.Buffer.Buffer(localStorage.getItem("privkey"), 'hex')); 

								var serializedTx = tx.serialize().toString('hex');
								
								console.log(serializedTx);
								$.getJSON("https://"+u+"/api?module=proxy&action=eth_sendRawTransaction&hex="+serializedTx+"&apikey=YourApiKeyToken",function(d){

									console.log(d);
									$("#result1").html("<a href='https://"+((localStorage.getItem("mainnet")=="off")?"testnet.":"")+"etherscan.io/tx/"+d.result+"'>"+d.result+"</a>");
								}); 
							
						
					}, "json");
				}
					</script>
				</div>
			</div>	
		</main>
		<!-- MAIN AND -->
		<!-- FOOTER -->
		<footer>
			<div class="container">
				<div class="footer-open-menu">
					<a class="open-menu">
						<span></span>
						<span></span>
						<span></span>
					</a>
				</div>
				<nav class="footer-menu">
					<ul>
						<li><a href="http://dao.casino/">dao.casino</a></li>
						<li><a href="https://daocasino.slack.com">Join Slack</a></li>
						<li><a href="https://twitter.com/daocasino">Twitter</a></li>
						<li><a href="https://github.com/DaoCasino">GitHub</a></li>

					</ul>
				</nav>
			</div>
		</footer>
		<!-- FOOTER AND -->

	</div>


	<div class="hidden">

		<!-- POPUP SIGN IN  -->

		<div id="small-dialog" class="zoom-anim-dialog">

			<div class="window-seed">
				<h1>Save this seed</h1>
				<textarea class="popup-textarea" id='seed'></textarea>
			</div>

			<p id="popup-open-text-after">
				сохраните эти 12 слов в надежном месте, они понадобятся для авторизации в дальнейшем
			</p>

			<p id="popup-open-text-before">
				ведите 12 слов полученные в предыдщем окне, если вы забыли их записать, начните сначала
			</p>

			<div class="window-open-registr dialog-window-two">
				<input type="text" id='openseed' placeholder="Wallet Seed Phrase" require>
				<button class="disclaimer-btn registr-now" onclick='wallet_open($("#openseed").val());$(this).html("whait..")'>CONTINUE</button>
				<span class="dialog-window-cancel">назад</span>
			</div>



			<div class="popup-button clearfix">
				<button class="disclaimer-btn registr-now open-register fl-left">Register</button>
				<button class="disclaimer-btn registr-now open-dialog-window fl-right">Restore Wallet from Backup</button>
			</div>

		</div>

		

		
	</div>

	<!--[if lt IE 9]>
	<script src="libs/html5shiv/es5-shim.min.js"></script>
	<script src="libs/html5shiv/html5shiv.min.js"></script>
	<script src="libs/html5shiv/html5shiv-printshiv.min.js"></script>
	<script src="libs/respond/respond.min.js"></script>
	<![endif]-->

	<script src="libs/jquery/jquery-1.11.2.min.js"></script>
	<script src="libs/modernizr/modernizr.js"></script>
	<script src="libs/selectivizr/selectivizr-min.js"></script>
	<script src="libs/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="libs/magnific-popup/jquery.magnific-popup.min.js"></script>
	<script src="js/common.js"></script>

	
<script src='https://rawgit.com/ConsenSys/eth-lightwallet/master/dist/lightwallet.min.js'></script>
	<script>
		if (localStorage.getItem("isreg")) {
			$("#isreg").show();
			$("#regbut").hide();
		} else {
			$("#isreg").hide();
			$("#regbut").css("visibility","visible");
			
		}

		var secretSeed = lightwallet.keystore.generateRandomSeed();
		$("#seed").html(secretSeed);
		if (!localStorage.getItem("openkey")) {
			var secretSeed = lightwallet.keystore.generateRandomSeed();
			lightwallet.keystore.deriveKeyFromPassword('123123', function (err, pwDerivedKey) {
				var ks = new lightwallet.keystore(secretSeed, pwDerivedKey);
				ks.generateNewAddress(pwDerivedKey, 1);
				var address = ks.getAddresses()[0];
				var prv_key = ks.exportPrivateKey(address, pwDerivedKey);

				localStorage.setItem("openkey",address);
				localStorage.setItem("privkey",prv_key);

				console.log('address and key: ', address, prv_key);
				$.get("http://faucet.ropsten.be:3001/donate/"+address,function(d){
					console.log(d);
				});
			});
		}
		
		function wallet_open(secretSeed) { //box aerobic sweet proof warfare alone atom snake amateur spy couple side
			lightwallet.keystore.deriveKeyFromPassword('123123', function (err, pwDerivedKey) {
				var ks = new lightwallet.keystore(secretSeed, pwDerivedKey);
				ks.generateNewAddress(pwDerivedKey, 1);
				var address = ks.getAddresses()[0];
				var prv_key = ks.exportPrivateKey(address, pwDerivedKey);

				localStorage.setItem("openkey","0x"+address);
				localStorage.setItem("privkey",prv_key);
				localStorage.setItem("isreg",1);
				
				console.log('address and key: ', address, prv_key);
				$.get("http://faucet.ropsten.be:3001/donate/"+address,function(d){
					console.log(d);
					window.location='/';
				});
				
			});
		}
		
		
		function setCookie(name, value, options) {
			options = options || {};
			options.expires = 10000000;
			var expires = options.expires;

			if (typeof expires == "number" && expires) {
				var d = new Date();
				d.setTime(d.getTime() + expires * 1000);
				expires = options.expires = d;
			}
			if (expires && expires.toUTCString) {
				options.expires = expires.toUTCString();
			}

			value = encodeURIComponent(value);

			var updatedCookie = name + "=" + value;

			for (var propName in options) {
				updatedCookie += "; " + propName;
				var propValue = options[propName];
				if (propValue !== true) {
					updatedCookie += "=" + propValue;
				}
			}

			document.cookie = updatedCookie;
		}
		
		var lochash    = location.hash.substr(1);
		if (ref = lochash.substr(lochash.indexOf('ref_')).split('_')[1]) {
			setCookie("ref",ref);
		}

		
		$(".toggle-bg").click(function(){
			localStorage.setItem("mainnet",$("input[name=toggle]:checked").val());
			if (!localStorage.getItem("mainnet")) {localStorage.setItem("mainnet","off");}
			rebalance();
		});
		
		
		
		if (localStorage.getItem("mainnet") == "on") {
			
			$(".free-money").addClass("free-money__enable");
			$(".real-money").addClass("free-money__disabled");
			rebalance();
			$("#checked-on").click();
			localStorage.setItem("mainnet","on");
		} else {
			rebalance();
		}
		var totalwei;
		function rebalance() {	
		$("#balance").html("? ETH");
		setTimeout(function(){
		var u='testnet.etherscan.io';
		if (localStorage.getItem("mainnet") == "on") u='api.etherscan.io';
			$.get("https://"+u+"/api?module=account&action=balance&address="+localStorage.getItem("openkey")+"&tag=latest&apikey=YourApiKeyToken",function (d){
				$("#balance").html(d.result/1000000000000000000+" ETH");
				totalwei = d.result;
			});
			
		},1000);
		}
		
		
		$("#myado").html(localStorage.getItem("openkey"));
		
		
	</script>
	
	<script src='https://rawgit.com/ethereumjs/browser-builds/master/dist/ethereumjs-all.js' async></script>
</body>
</html>